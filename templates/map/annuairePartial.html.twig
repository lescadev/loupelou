{% set card_construct %}
    {% if response is defined %}
        <div class="row">
            {% for result in response %}
                <div class="card p-0 mb-2" id="{{ result.0.id }}">
                    <div class="card-header">
                        {{ result.denomination }}
                        {% if result.nom is defined %}
                            <h6 class="card-subtitle mb-2 text-muted">{{ result.nom }}</h6>
                        {% endif %}
                    </div>
                    <div class="card-body text-dark">
                        {% if result.0.adresse | length > 0 or result.0.ville | length > 0 %}
                            <p class="card-text">
                                <i class="fa fa-map-marker" aria-hidden="true"></i> {{ result.0.adresse }}, {{ result.0.code_postal }} {{ result.0.ville }}
                            </p>
                        {% endif %}
                        {% if result.0.telephone | length > 0 %}
                            {% set splitArray = result.0.telephone | split('', 2) %}
                            {% set formattedPhone = splitArray|join(' ') %}
                            <p class="card-text">
                                <i class="fa fa-phone" aria-hidden="true"></i> {{ formattedPhone }}
                            </p>
                        {% endif %}
                        {% if result.0.description | length > 0 %}
                            <p class="card-text mb-0">
                                <i class="fa fa-id-card" aria-hidden="true"></i> {{ result.0.description | easyadmin_truncate(40) }}
                            </p>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
    {% endif %}
{% endset %}

{% set response = response|merge({'card': card_construct}) %}

{{ response|json_encode(constant('JSON_PRETTY_PRINT'))|raw }}